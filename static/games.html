<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browse Games - YourStore</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="games.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
        <!-- Main Header Include -->
        <header class="main-header">
        <div class="header-left">
            <span class="logo">YourStore</span>
            <nav>
                <ul>
                    <li><a href="index.html">Games</a></li>
                    <li><a href="#">Help</a></li>
                    <li><a href="#">Store</a></li>
                    <li><a href="#">Plus</a></li>
                </ul>
            </nav>
        </div>
        <div class="header-right">
            <a href="login.html" id="loginBtn" class="header-login-btn">Login</a>
            <button id="registerBtn">Register</button>
            <span id="cartIconContainer" style="display:none;">
                <a href="cart.html" id="cartIcon" class="header-cart-icon" style="margin:0 12px;">
                    <span class="material-icons" style="font-size:28px;vertical-align:middle;color:#fff;">shopping_cart</span>
                </a>
            </span>
            <div class="header-user-menu" id="headerUserMenu" style="display: none;">
                <button class="user-menu-btn" id="userMenuBtn">
                    <span class="user-avatar" id="userAvatar">A</span>
                    <span class="user-name" id="userName"></span>
                    <svg class="user-menu-arrow" width="16" height="16" viewBox="0 0 24 24"><path fill="#fff" d="M7 10l5 5 5-5z"/></svg>
                </button>
                <div class="user-dropdown" id="userDropdown" style="display: none;">
                    <ul>
                        <li><a href="#">My Achievements</a></li>
                        <li><a href="#">Epic Rewards</a></li>
                        <li><a href="#">Epic Wallet</a></li>
                        <li><a href="#">Coupons</a></li>
                        <li><a href="#">Account</a></li>
                        <li><a href="#">Redeem Code</a></li>
                        <li><a href="#">Wishlist</a></li>
                        <li><a href="#" id="signOutBtn">Sign Out</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>
    <!--#include file="header.html" -->
    <main class="eg-main">
        <div class="eg-browse-header-row">
            <div class="eg-browse-tabs">
                <input class="eg-search-bar" id="egSearchBar" placeholder="Search store" />
                <span class="eg-browse-tab active">Discover</span>
                <span class="eg-browse-tab">Browse</span>
                <span class="eg-browse-tab">News</span>
            </div>
        </div>
        <section class="eg-genres-section">
            <h1 class="eg-section-title">Popular Genres</h1>
            <div class="eg-genres-carousel-wrapper">
                <button class="eg-carousel-arrow left" aria-label="Scroll left">&#8249;</button>
                <div class="eg-genres-carousel" id="genresCarousel"></div>
                <button class="eg-carousel-arrow right" aria-label="Scroll right">&#8250;</button>
            </div>
        </section>
        <section class="eg-content-row">
            <aside class="eg-sidebar">
                <div class="eg-filters-header">
                    <span>Filters <span class="eg-filters-count"></span></span>
                    <a href="#" class="eg-reset-link" id="resetFilters">reset</a>
                </div>
                <div class="eg-filters-search">
                    <svg class="eg-search-icon" width="18" height="18" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8" stroke="#c7d5e0" stroke-width="2" fill="none"/><line x1="21" y1="21" x2="16.65" y2="16.65" stroke="#c7d5e0" stroke-width="2"/></svg>
                    <input type="text" placeholder="Keywords" class="eg-filters-input" id="sidebarKeywordInput">
                </div>
                <div class="eg-filters-accordion">
                    <div class="eg-filter-section">
                        <button class="eg-accordion-btn active" data-filter="price">Price</button>
                        <div class="eg-accordion-panel" id="filterPrice" style="display:block;"></div>
                    </div>
                    <div class="eg-filter-section">
                        <button class="eg-accordion-btn active" data-filter="genre">Genre</button>
                        <div class="eg-accordion-panel" id="filterGenre" style="display:block;"></div>
                    </div>
                    <div class="eg-filter-section">
                        <button class="eg-accordion-btn active" data-filter="types">Types</button>
                        <div class="eg-accordion-panel" id="filterTypes" style="display:block;"></div>
                    </div>
                </div>
            </aside>
            <div class="eg-content-left">
                <div class="eg-show-row">
                    <span>Show:</span>
                    <select id="showDropdown" class="eg-show-dropdown">
                        <option value="new">New Release</option>
                        <option value="top">Top Sellers</option>
                        <option value="upcoming">Upcoming</option>
                        <option value="free">Free</option>
                    </select>
                </div>
                <div class="eg-games-grid" id="gamesGrid">
                    <!-- Game cards will be injected here -->
                </div>
            </div>
        </section>
    </main>
    <footer class="eg-footer">
        <div class="eg-footer-main">
            <span class="eg-footer-title">STORE</span>
            <div class="eg-footer-socials">
                <a href="#"><svg><!-- Facebook icon --></svg></a>
                <a href="#"><svg><!-- X/Twitter icon --></svg></a>
                <a href="#"><svg><!-- YouTube icon --></svg></a>
            </div>
        </div>
        <hr class="eg-footer-hr">
        <div class="eg-footer-columns">
            <div class="eg-footer-col"><div class="eg-footer-col-title">Games</div><a href="#">Fortnite</a><a href="#">Rocket League</a><a href="#">Fall Guys</a></div>
            <div class="eg-footer-col"><div class="eg-footer-col-title">Marketplaces</div><a href="#">Epic Games Store</a><a href="#">Ru</a></div>
            <div class="eg-footer-col"><div class="eg-footer-col-title">Tools</div><a href="#">Unreal Engine</a><a href="#">UEFN</a></div>
            <div class="eg-footer-col"><div class="eg-footer-col-title">Online Services</div><a href="#">Epic Online Services</a></div>
            <div class="eg-footer-col"><div class="eg-footer-col-title">Company</div><a href="#">About</a><a href="#">Newsroom</a></div>
            <div class="eg-footer-col"><div class="eg-footer-col-title">Resources</div><a href="#">Dev Community</a></div>
        </div>
    </footer>
    <script src="games.js"></script>
    <script>
    // Show cart icon only if user is logged in
    (function() {
        function getToken() {
            let token = localStorage.getItem('jwt_token');
            if (token) return token;
            let match = document.cookie.match(/(?:^|; )jwt_token=([^;]*)/);
            if (match) return decodeURIComponent(match[1]);
            match = document.cookie.match(/(?:^|; )jwt=([^;]*)/);
            if (match) return decodeURIComponent(match[1]);
            return null;
        }
        if (getToken()) {
            var cartIcon = document.getElementById('cartIconContainer');
            if (cartIcon) cartIcon.style.display = '';
            // Hide login/register, show user menu
            document.getElementById('loginBtn').style.display = 'none';
            document.getElementById('registerBtn').style.display = 'none';
            document.getElementById('headerUserMenu').style.display = '';
        } else {
            // Show login/register, hide user menu
            document.getElementById('loginBtn').style.display = '';
            document.getElementById('registerBtn').style.display = '';
            document.getElementById('headerUserMenu').style.display = 'none';
        }
        // Sign out logic
        var signOutBtn = document.getElementById('signOutBtn');
        if (signOutBtn) {
            signOutBtn.onclick = function(e) {
                e.preventDefault();
                localStorage.removeItem('jwt_token');
                document.cookie = 'jwt_token=; Max-Age=0; path=/;';
                document.cookie = 'jwt=; Max-Age=0; path=/;';
                window.location.href = 'login.html';
            };
        }
    })();
    </script>
</body>
</html>
